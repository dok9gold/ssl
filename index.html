<!DOCTYPE html>
<html>
<body>
<h1>Hello World</h1>
<p>I'm hosted with GitHub Pages. ssl</p>

<script src="https://www.gstatic.com/firebasejs/4.12.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.12.1/firebase-messaging.js"></script>


<script>
    // Initialize Firebase
    var config = {
        apiKey: "AIzaSyA9azChccE_97S7MwZG5v2QvKt96OtArgo",
        authDomain: "test-73b49.firebaseapp.com",
        databaseURL: "https://test-73b49.firebaseio.com",
        projectId: "test-73b49",
        storageBucket: "test-73b49.appspot.com",
        messagingSenderId: "837788280658"
    };
    firebase.initializeApp(config);
      // Get Instance ID token. Initially this makes a network call, once retrieved
    // subsequent calls to getToken will return from cache.
    // Retrieve Firebase Messaging object.
    const messaging = firebase.messaging();
    // Add the public key generated from the console here.
    messaging.usePublicVapidKey("BPqZNW9nFQCiCLNOwve0yhLgoWll7eVSaGR7htR6gtFNgp9cwIOjWugDT177yIIgm4KUVowkAxkqsKZ3YVtkQ40");

    messaging.requestPermission().then(function() {
    console.log('Notification permission granted.');
    // TODO(developer): Retrieve an Instance ID token for use with FCM.
    // ...
    }).catch(function(err) {
    console.log('Unable to get permission to notify.', err);
    });

    messaging.getToken().then(function(currentToken) {
        console.log(currentToken);
        if (currentToken) {
        //sendTokenToServer(currentToken);
        //updateUIForPushEnabled(currentToken);
        } else {
        // Show permission request.
        console.log('No Instance ID token available. Request permission to generate one.');
        // Show permission UI.
        updateUIForPushPermissionRequired();
        //setTokenSentToServer(false);
        }
    }).catch(function(err) {
        console.log('An error occurred while retrieving token. ', err);
        //showToken('Error retrieving Instance ID token. ', err);
        //setTokenSentToServer(false);
    });


    // Callback fired if Instance ID token is updated.
    messaging.onTokenRefresh(function() {
    messaging.getToken().then(function(refreshedToken) {
        console.log('Token refreshed.');
        // Indicate that the new Instance ID token has not yet been sent to the
        // app server.
        //setTokenSentToServer(false);
        // Send Instance ID token to app server.
        //sendTokenToServer(refreshedToken);
        // ...
    }).catch(function(err) {
        console.log('Unable to retrieve refreshed token ', err);
        showToken('Unable to retrieve refreshed token ', err);
    });
    });

    messaging.onMessage(function(payload) {
        console.log('18181818 Message received. ', payload);
    });

    </script>

</body>
</html>